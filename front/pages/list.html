<!DOCTYPE html>
<html lang="en" xmlns:x-bind="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/scripts/api.js"></script>
  <script src="/scripts/list.js"></script>
</head>

<body>
  <a href="/">Accueil</a><br>
  <div x-data='listDocs()'>
    <table id="dtBasicExample" class="table table-striped table-bordered table-sm">
      <thead>
        <tr>
          <th class="th-sm">ID</th>
          <th class="th-sm">Nom du document</th>
          <th class="th-sm">Date d'archivage</th>
          <th class="th-sm">Télécharger l'archive</th>
          <th class="th-sm">Supprimer l'archive</th>
        </tr>
      </thead>
      <tbody x-data="{docs: []}" x-init="docs = await getAll()">
        <template x-for="doc in docs">
          <tr>
            <td x-text='doc.idDocument'></td>
            <td x-text='doc.nom'></td>
            <td x-text='doc.dateArchivage'></td>
            <td><a @click="alert(doc.lien)" href="#">Lien</a></td>
            <td><button type="button" class="btn btn-danger" @click="deleteDoc(doc.idDocument)">Supprimer</button></td>
          </tr>
        </template>
      </tbody>
    </table>
    <div x-text='formMessage'></div>
  </div>
</body>

</html>